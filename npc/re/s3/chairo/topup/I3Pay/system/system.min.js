function chkEvent(e) {
    var t;
    window.event ? t = window.event.keyCode : e && (t = e.which), 13 == t && setTimeout(function() {
        doCallAjaxLogin()
    }, 5)
}

function text_only(e) {
    var t;
    if (!e) e = window.event;
    e.keyCode ? t = e.keyCode : e.which && (t = e.which);
    var a = String.fromCharCode(t);
    return !!/^[A-Za-z\d]+$/.test(a)
}

function genRef() {
    return userid.length > 9 && (userid = userid.substring(0, 9)), "" + userid + (now.getFullYear() - 2e3) + (now.getMonth() + 1) + now.getDate() + (Math.floor(89999 * Math.random()) + 1e4)
}

function FunctionPayConfirm(e) {
    Swal.fire({
        title: "Payment",
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "ยืนยันการโอนเงินอีกครั้ง!",
        cancelButtonText: "ยกเลิก",
        showCancelButton: !0,
        showLoaderOnConfirm: !0,
        allowOutsideClick: !1,
        allowEscapeKey: !1,
        preConfirm: function() {
            return new Promise(function(t, a) {
                var n = "tRef=" + e + "&tAccountId=" + accountid;
                setTimeout(function() {
                    $.ajax({
                        type: "POST",
                        data: n,
                        url: "function/check_scb.php",
                        success: function(e) {
                            "error" == e ? Swal.fire({
                                type: "error",
                                title: "เกิดข้อผิดพลาด",
                                text: "คุณไม่ได้ทำการโอนเงิน"
                            }) : Swal.fire({
                                type: "success",
                                title: "สำเร็จ",
                                text: "คุณทำการยืนยันการโอนสำเร็จ!"
                            }).then(function() {
                                setTimeout(function() {
                                    window.location.reload()
                                }, 2e3)
                            })
                        }
                    }), t()
                }, 2e3)
            })
        }
    })
}

function FunctionPay(e) {
    ref = userid;
    var t = "tRef=" + ref + "&tAmout=" + e + "&tAccountId=" + accountid;
	
	Swal.fire({
        title: "กรุณารอซักครู่!",
        showCancelButton: !1,
        showLoaderOnConfirm: !1,
        allowOutsideClick: !1,
        allowEscapeKey: !1
    }), Swal.showLoading();
	
    $.ajax({
        type: "POST",
        data: t,
        url: "function/form_scb.php",
		success: function(newRef) {
            if(newRef != "error") {
                ref = newRef;
                var a = new Image;
                a.onload = function() {
                    Swal.hideLoading(), Swal.fire({
                        title: "ราคา " + e,
                        text: "หลังจากยืนยันการโอนเงินแล้วกรุณารอสักครู่หน้านี้จะปิดลงเอง **1 QR Code ใช้ได้แค่ 1 ครั้งห้ามใช้ซ้ำ **",
                        imageUrl: scb_domain + "/api/payment/" + scb_id + "/" + newRef + "/" + e,
                        cancelButtonColor: "#d33",
                        cancelButtonText: "ยกเลิก",
                        showCancelButton: !0,
                        showConfirmButton: false,
                        allowOutsideClick: !1,
                        allowEscapeKey: !1,
                        onOpen: function() {
                            autoCheckPay(newRef, e, accountid);
                        },
                        onClose: function() {
                            window.location.reload();
                        }
                    })
                }, a.src = scb_domain + "/api/payment/" + scb_id + "/" + newRef + "/" + e;
            } else {
                Swal.fire({
                    type: "error",
                    title: "เกิดข้อผิดพลาด",
                    text: "คุณทำรายการเกินจำนวนที่กำหนด โปรดรอประมาณ 10 นาที"
                });
            }
		}
	});
}

function autoCheckPay(ref, amout, accountid) {
    var n = "tRef=" + ref + "&tAmout=" + amout + "&tAccountId=" + accountid;
    setTimeout(function() {
        $.ajax({
            type: "POST",
            data: n,
            url: "function/check_scb.php",
            success: function(e) {
                if (e != "ok" && e != "true") {
                    setTimeout(function() {
                        autoCheckPay(ref, amout, accountid);
                    }, 3000)
                } else {
                    Swal.fire({
                        type: "success",
                        title: "สำเร็จ",
                        text: "คุณทำการโอนเงินสำเร็จ!"
                    }).then(function() {
                        setTimeout(function() {
                            window.location.reload()
                        }, 2e3)
                    });
                }
            }
        })
    });
}

window.onload = function() {
    function e(e) {
        return e.stopPropagation ? e.stopPropagation() : window.event && (window.event.cancelBubble = !0), e.preventDefault(), !1
    }
    $(document).ready(function() {
        $("#exchangePay").hide(), $("#history").hide(), $("#cha").hide(), $("#exchangeTMT").hide(), $("#exchangePayT").hide()
    }), document.addEventListener("contextmenu", function(e) {
        e.preventDefault()
    }, !1), document.addEventListener("keydown", function(t) {
        t.ctrlKey && t.shiftKey && 73 == t.keyCode && e(t), t.ctrlKey && t.shiftKey && 74 == t.keyCode && e(t), 83 == t.keyCode && (navigator.platform.match("Mac") ? t.metaKey : t.ctrlKey) && e(t), t.ctrlKey && 85 == t.keyCode && e(t), 123 == event.keyCode && e(t)
    }, !1)
}, $(document).ready(function() {
    $("#pay").click(function() {
        $("#info").hide(), $("#historyTM").hide(), $("#history").show(), $("#exchange").hide(), $("#exchangeTMTZ").hide(), $("#exchangePay").show(), $("#pay").hide()
    }), $("#true").click(function() {
        $("#history").hide(), $("#exchange").hide(), $("#exchangeTMT").hide(), $("#exchangeTMTZ").hide(), $("#exchangePayT").hide(), $("#cha").show()
    }), $("#cha").click(function() {
        $("#history").hide(), $("#historyTM").hide(), $("#cha").hide(), $("#info").show(), $("#exchangeTMT").hide(), $("#exchangeTMTZ").hide(), $("#exchangePayT").hide()
    }), $("#exchangePay").click(function() {
        $("#history").hide(), $("#historyTM").hide(), $("#exchange").show(), $("#exchangeTMTZ").show(), $("#exchangePay").hide(), $("#pay").show()
    })
});
var HttPRequest = !1;

function doCallAjaxLogin() {
    var e = document.getElementById("txtUsername").value,
        t = document.getElementById("txtPassword").value;
    if ("" == e) Swal.fire({
        type: "warning",
        title: "แจ้งเตือน",
        text: "กรุณากรอก Account ID!"
    });
    else if ("" == t) Swal.fire({
        type: "warning",
        title: "แจ้งเตือน",
        text: "กรุณากรอก Password!"
    });
    else {
        if (HttPRequest = !1, window.XMLHttpRequest)(HttPRequest = new XMLHttpRequest).overrideMimeType && HttPRequest.overrideMimeType("text/html");
        else if (window.ActiveXObject) try {
            HttPRequest = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (e) {
            try {
                HttPRequest = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (e) {}
        }
        if (!HttPRequest) return alert("Cannot create XMLHTTP instance"), !1;
        var a = "tUsername=" + encodeURI(document.getElementById("txtUsername").value) + "&tPassword=" + encodeURI(document.getElementById("txtPassword").value);
        $.ajax({
            type: "POST",
            data: a,
            url: "function/check_login.php",
            success: function(e) {
                "ok" != e ? Swal.fire({
                    type: "error",
                    title: "เกิดข้อผิดพลาด",
                    text: "กรุณาตรวจสอบ ID หรือ Password ของคุณ!"
                }) : (Swal.fire({
                    type: "success",
                    title: "สำเร็จ",
                    text: "กำลังพาท่านเข้าสู่ระบบ!",
                    showConfirmButton: !1,
                    timer: 1500
                }), Swal.showLoading(), setTimeout(function() {
                    // window.location = "member.php";
					document.getElementById("loginForm").submit();
                }, 2e3))
            }
        })
    }
}

function doCallAjaxLogout() {
    $.ajax({
        type: "POST",
        data: "",
        url: "logout.php",
        success: function(e) {
            e && (Swal.fire({
                type: "success",
                title: "สำเร็จ",
                text: "กำลังพาท่านออกจากระบบ!",
                showConfirmButton: !1,
                timer: 1500
            }), Swal.showLoading(), setTimeout(function() {
                window.location.replace("index.php")
            }, 2e3))
        }
    })
}